<!--
  Archivo: componentes/navbarAdmin.ejs
  Propósito: Sidebar / navegación lateral usada por las páginas del panel de administración.
  Variables EJS esperadas:
    - user: objeto de usuario (opcional) para mostrar información de perfil breve en el sidebar.
    - showDevAdmin: booleano (opcional) para mostrar controles de desarrollo en admin.
  Dependencias CSS/JS:
    - /assets/css/administrador.css, /assets/css/admin.css, /assets/css/admin-components.css
    - /assets/js/admin-common.js para inicializaciones (sidebar toggle, accesibilidad)
  Notas técnicas para Deepwiki/manual:
    - Este partial se incluye en plantillas admin/* mediante include('../componentes/navbarAdmin.ejs').
    - Provee enlaces a rutas administrativas (adminExpertos, adminCategorias, adminUsuarios, adminLogs).
    - No hace llamadas directas a APIs; el comportamiento dinámico (paginación, fetch) lo gestiona JS en /assets/js/admin/.
-->

<!-- Offcanvas sidebar (toggle removed: menu will be opened via layout or automatically on larger screens) -->
<div class="admin-layout">
  <!-- Botón para abrir el menú en móvil/tablet -->
  <button class="header-menu-toggle" id="sidebarToggle">
    <i class="fas fa-bars"></i>
  </button>

  <!-- Barra lateral -->
  <div class="admin-sidebar" id="adminSidebar">
    <div class="sidebar-header">
      <a href="/admin" class="logo">
        <img src="/assets/img/logo.png" alt="Servitech Logo" class="logo-img" />
        <span class="logo-text">Admin</span>
      </a>
    </div>

    <div class="sidebar-content">
      <nav class="sidebar-nav">
        <ul class="list-unstyled">
          <li class="nav-item"><a class="nav-link" href="/admin"><i
                class="fas fa-user-friends"></i><span>Principal</span></a></li>
          <li class="nav-item"><a class="nav-link" href="/admin/adminExpertos"><i
                class="fas fa-users"></i><span>Expertos</span></a></li>
          <li class="nav-item"><a class="nav-link" href="/admin/adminCategorias"><i
                class="fas fa-tags"></i><span>Categorías</span></a></li>
          <li class="nav-item"><a class="nav-link" href="/admin/adminUsuarios"><i
                class="fas fa-envelope"></i><span>Clientes</span></a></li>
          <li class="nav-item"><a class="nav-link" href="/admin/adminNotificaciones"><i
                class="fas fa-bell"></i><span>Notificaciones</span></a></li>
          <li class="nav-item"><a class="nav-link" href="/admin/adminLogs"><i
                class="fas fa-file-alt"></i><span>Logs</span></a></li>
        </ul>
      </nav>

      <div class="sidebar-footer">
        <a href="/" class="btn-outline"><i class="fas fa-globe"></i><span> Ver sitio</span></a>
        <!-- Logout simple vía GET para compatibilidad y comportamiento predecible -->
        <a href="/logout" class="btn-logout"><i class="fas fa-sign-out-alt"></i><span> Cerrar sesión</span></a>
      </div>
    </div>
  </div>

</div>

<!-- Barra de navegación inferior para móviles (opcional) -->
<nav class="mobile-bottom-nav" id="mobileBottomNav">
  <ul class="mobile-nav-items">
    <li class="mobile-nav-item">
      <a href="/admin" class="mobile-nav-link">
        <i class="fas fa-user-friends"></i>
        <span>Principal</span>
      </a>
    </li>
    <li class="mobile-nav-item">
      <a href="/admin/adminExpertos" class="mobile-nav-link">
        <i class="fas fa-users"></i>
        <span>Expertos</span>
      </a>
    </li>
    <li class="mobile-nav-item">
      <a href="/admin/adminCategorias" class="mobile-nav-link">
        <i class="fas fa-tags"></i>
        <span>Categorías</span>
      </a>
    </li>
    <li class="mobile-nav-item">
      <a href="/admin/adminUsuarios" class="mobile-nav-link">
        <i class="fas fa-envelope"></i>
        <span>Usuarios</span>
      </a>
    </li>
    <li class="mobile-nav-item">
    </li>
  </ul>
</nav>

<!-- JavaScript para la funcionalidad responsive -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const sidebarToggle = document.getElementById('sidebarToggle');
    const adminSidebar = document.getElementById('adminSidebar');
    // mobileMenuToggle removed from template
    const mobileBottomNav = document.getElementById('mobileBottomNav');

    // Alternar sidebar en tablet/móvil
    if (sidebarToggle) {
      sidebarToggle.addEventListener('click', function () {
        adminSidebar.classList.toggle('sidebar-open');
      });
    }

    // mobile menu toggle removed: sidebar open/close handled via header button

    // Cerrar sidebar al hacer clic en un enlace (en móviles)
    const navLinks = document.querySelectorAll('.sidebar-nav .nav-link');
    navLinks.forEach(link => {
      link.addEventListener('click', function () {
        if (window.innerWidth < 992) {
          adminSidebar.classList.remove('sidebar-open');
        }
      });
    });

    // Mostrar/ocultar barra inferior en móviles
    function handleMobileBottomNav() {
      if (window.innerWidth <= 767) {
        mobileBottomNav.style.display = 'block';
      } else {
        mobileBottomNav.style.display = 'none';
      }
    }

    // Inicializar y escuchar cambios de tamaño
    handleMobileBottomNav();
    window.addEventListener('resize', handleMobileBottomNav);
  });
</script>
