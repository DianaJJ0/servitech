<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Gestión de Expertos - Servitech Admin</title>
  <link rel="stylesheet" href="/assets/css/administrador.css" />
  <link rel="stylesheet" href="/assets/css/admin.css" />
  <link rel="stylesheet" href="/assets/css/admin-panel-global.css" />
  <link rel="stylesheet" href="/assets/css/admin-components.css" />
  <link rel="stylesheet" href="/assets/css/admin-expertos.css" />
  <!-- page-specific CSS -->
  <link rel="stylesheet" href="/assets/css/admin-expertos-approval.css" />
  <!--<link rel="stylesheet" href="/assets/css/admin-responsive.css" />-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
</head>

<body>
  <!-- Navbar -->
  <div class="admin-layout">
    <%- include('../componentes/navbarAdmin.ejs') %>
      <main class="admin-main">
        <header class="admin-header">
          <div class="header-search">
            <i class="fas fa-search"></i>
            <input type="text" id="inputBuscarUsuario" placeholder="Buscar expertos..." />
          </div>
          <div class="header-actions">
            <div class="notification-icon">
              <i class="fas fa-bell"></i>
              <span class="notification-badge">5</span>
            </div>
            <div class="admin-profile">
              <img src="https://i.pravatar.cc/150?img=11" alt="Admin profile" class="profile-img" />
              <div class="profile-info">
                <span class="profile-name">Admin ServiTech</span>
                <span class="profile-role">Administrador</span>
              </div>
              <i class="fas fa-chevron-down"></i>
            </div>
          </div>
        </header>

        <div class="admin-content">
          <div class="page-header">
            <h1>Gestión de Expertos</h1>
            <div class="page-actions">
              <button type="button" class="btn-primary" id="btnAddExpert">
                <i class="fas fa-plus"></i>
                <span>Nuevo experto</span>
              </button>
              <button class="btn-outline">
                <i class="fas fa-file-export"></i>
                <span>Exportar</span>
              </button>
            </div>
          </div>



          <!-- Filtros de Estado (clases ajustadas para CSS global) -->
          <div class="admin-controls admin-filters">
            <div class="admin-controls__row admin-filter">
              <label for="estadoFilter" class="admin-label admin-label--small">Estado:</label>
              <div class="admin-select-wrapper">
                <select id="estadoFilter" class="admin-select admin-select--medium" aria-label="Filtrar por estado">
                  <option value="all">Todos los estados</option>
                  <option value="activo">Activos</option>
                  <option value="pendiente-verificacion">Pendientes de verificación</option>
                  <option value="inactivo">Inactivos</option>
                </select>
              </div>
            </div>
            <div class="admin-controls__row admin-filter">
              <label for="filtroTexto" class="admin-label admin-label--small">Buscar:</label>
              <div class="admin-input-wrapper">
                <input type="search" id="filtroTexto" class="admin-input admin-input--medium" placeholder="Nombre, email..."
                  aria-label="Buscar por nombre o correo" data-filter="texto" />
              </div>
            </div>
          </div>

          <div class="expertos-grid">
            <div class="table-container admin-table--expertos-container">
              <table class="admin-table admin-table--expertos">
                <thead>
                  <tr>
                    <th>Expertos</th>
                    <th>Categorías</th>
                    <th>Registro</th>
                    <th>Sesiones</th>
                    <th>Estado</th>
                    <th>Acciones</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>
                      <div class="experto-card">
                        <img src="https://i.pravatar.cc/150?img=32" alt="Diana" class="experto-avatar" />
                        <div class="experto-info">
                          <div class="experto-name">Diana Jiménez</div>
                          <div class="experto-email">diarajimereojimenez10152310@gmail.com</div>
                        </div>
                      </div>
                    </td>
                    <td>
                      <span class="sin-categorias">Sin categorías</span>
                    </td>
                    <td>
                      <span class="fecha-registro">-</span>
                    </td>
                    <td>
                      <span class="sesiones-count">0</span>
                    </td>
                    <td>
                      <span class="estado-badge estado-activo">
                        <i class="fas fa-circle"></i>
                        activo
                      </span>
                    </td>
                    <td>
                      <div class="experto-acciones">
                        <button class="accion-btn">
                          <i class="fas fa-eye"></i>
                          Ver
                        </button>
                        <button class="accion-btn accion-btn--editar">
                          <i class="fas fa-edit"></i>
                          Editar
                        </button>
                      </div>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <div class="experto-card">
                        <img src="https://i.pravatar.cc/150?img=45" alt="Pedro" class="experto-avatar" />
                        <div class="experto-info">
                          <div class="experto-name">Pedro pruebas</div>
                          <div class="experto-email">experto@correo.com</div>
                        </div>
                      </div>
                    </td>
                    <td>
                      <span class="sin-categorias">Sin categorías</span>
                    </td>
                    <td>
                      <span class="fecha-registro">-</span>
                    </td>
                    <td>
                      <span class="sesiones-count">0</span>
                    </td>
                    <td>
                      <span class="estado-badge estado-activo">
                        <i class="fas fa-circle"></i>
                        activo
                      </span>
                    </td>
                    <td>
                      <div class="experto-acciones">
                        <button class="accion-btn">
                          <i class="fas fa-eye"></i>
                          Ver
                        </button>
                        <button class="accion-btn accion-btn--editar">
                          <i class="fas fa-edit"></i>
                          Editar
                        </button>
                      </div>
                    </td>
                  </tr>
                </tbody>
              </table>

              <div class="admin-pagination">
                <span class="admin-pagination__info">Mostrando 1-2 de 2 expertos</span>
                <div class="admin-pagination__controles">
                  <button class="admin-pagination__btn admin-pagination__btn--disabled">
                    <i class="fas fa-chevron-left"></i>
                  </button>
                  <button class="admin-pagination__btn admin-pagination__btn--active">1</button>
                  <button class="admin-pagination__btn">
                    <i class="fas fa-chevron-right"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>
  </div>

  <!-- Script: toggle filtros expertos -->
  <script src="/assets/js/admin/admin-expertos-filters.js"></script>
  <script src="/assets/js/admin/admin-expertos-accessibility.js"></script>
  <script src="/assets/js/admin/admin-expertos-actions.js"></script>

  <!-- Modal para agregar nuevo experto -->
  <div id="expertModal" class="modal-expert">
    <div class="modal-expert__container">

      <div class="modal-expert__header">
        <h2 class="modal-expert__title">
          <i class="fas fa-user-plus"></i> Agregar nuevo experto
        </h2>
        <button class="btn-close" aria-label="Cerrar modal">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="modal-expert__body">
        <form id="addExpertForm">
          <div class="modal-expert__grid">

            <!-- Información básica -->
            <div class="form-group">
              <label class="modal-expert__label" for="name">
                <i class="fas fa-user modal-expert__icon"></i>
                Nombre completo
              </label>
              <input type="text" id="name" class="modal-expert__input" placeholder="Nombre y apellidos registrados" />
            </div>

            <!-- Email -->
            <div class="form-group">
              <label class="modal-expert__label" for="email">
                <i class="fas fa-envelope modal-expert__icon"></i>
                Email registrado
              </label>
              <input type="email" id="email" class="modal-expert__input" placeholder="Email de la cuenta" />
            </div>

            <!-- Precio por hora -->
            <div class="form-group">
              <label class="modal-expert__label" for="precio">
                <i class="fas fa-money-bill-wave modal-expert__icon"></i>
                Precio por hora (COP)
                <span class="price-tooltip" title="Ejemplo recomendado: $30.000 - $200.000 COP">
                  <i class="fas fa-info-circle"></i>
                </span>
              </label>
              <div class="price-input-wrapper">
                <input type="number" id="precio" class="modal-expert__input price-input" min="10000" step="100" required
                  placeholder="Ej: 50000" />
              </div>
              <p class="modal-expert__hint">Tarifa por hora de asesoría (Recomendado: $30.000 - $200.000 COP)</p>
            </div>

            <!-- Días disponibles -->
            <div class="form-group">
              <label class="modal-expert__label">
                <i class="fas fa-calendar-alt modal-expert__icon"></i>
                Días disponibles
              </label>
              <div class="days-selector">
                <div class="days-buttons">
                  <button type="button" class="day-button" data-day="lunes" disabled aria-disabled="true">L</button>
                  <button type="button" class="day-button" data-day="martes" disabled aria-disabled="true">M</button>
                  <button type="button" class="day-button" data-day="miercoles" disabled aria-disabled="true">X</button>
                  <button type="button" class="day-button" data-day="jueves" disabled aria-disabled="true">J</button>
                  <button type="button" class="day-button" data-day="viernes" disabled aria-disabled="true">V</button>
                  <button type="button" class="day-button" data-day="sabado" disabled aria-disabled="true">S</button>
                  <button type="button" class="day-button" data-day="domingo" disabled aria-disabled="true">D</button>
                </div>
                <div class="days-display">Ningún día seleccionado</div>
              </div>
              <input type="hidden" id="diasDisponibles" name="diasDisponibles" />
            </div>

            <!-- Estado (custom select para control visual y accesibilidad) -->
            <div class="form-group">
              <label class="modal-expert__label" for="status_display">
                <i class="fas fa-toggle-on modal-expert__icon"></i>
                Estado
              </label>
              <!-- Estado: readonly display is created/managed by JS when needed -->
              <input type="hidden" id="statusInput" name="status" value="">
              <small class="modal-expert__hint">Define si el experto puede recibir solicitudes</small>
            </div>

            <!-- Categorías -->
            <div class="form-group full-width">
              <label class="modal-expert__label" for="categorias-input">
                <i class="fas fa-tags modal-expert__icon"></i>
                Categorías *
              </label>

              <!-- Input de búsqueda -->
              <div class="categorias-search-wrapper">
                <input type="text" id="categorias-input" class="modal-expert__input" placeholder="Buscar categorías..."
                  autocomplete="off">
                <i class="fas fa-search categorias-search-icon"></i>
              </div>

              <!-- Chips de categorías seleccionadas -->
              <div class="categorias-chips" id="categorias-chips">
                <span class="categorias-empty">No hay categorías seleccionadas</span>
              </div>

              <!-- Lista de opciones -->
              <div class="categorias-options" id="categorias-options">
                <!-- Opciones se cargan dinámicamente -->
              </div>

              <!-- Campo hidden para el formulario -->
              <input type="hidden" id="categorias-values" name="categorias">

              <small class="modal-expert__hint">Selecciona las categorías del experto (mínimo 1)</small>
            </div>

            <!-- Biografía -->
            <div class="form-group full-width">
              <label class="modal-expert__label" for="bio">
                <i class="fas fa-file-alt modal-expert__icon"></i>
                Biografía profesional
              </label>
              <textarea id="bio" class="modal-expert__input modal-expert__textarea" rows="4"
                placeholder="Descripción breve de experiencia y especialización"></textarea>
            </div>

            <!-- Datos bancarios -->
            <div class="form-group full-width">
              <div class="bank-section">
                <h3 class="bank-title">
                  Datos Bancarios para Pagos
                </h3>
                <p class="bank-subtitle">Información necesaria para recibir pagos por tus asesorías</p>

                <div class="bank-grid">
                  <div class="form-group">
                    <label class="modal-expert__label" for="banco">
                      <i class="fas fa-university modal-expert__icon"></i>
                      Banco *
                    </label>
                    <!-- Banco: readonly display is created/managed by JS when needed -->
                    <input type="hidden" id="banco_hidden_view" name="banco">
                  </div>

                  <div class="form-group">
                    <label class="modal-expert__label" for="tipoCuenta">
                      <i class="fas fa-credit-card modal-expert__icon"></i>
                      Tipo de cuenta *
                    </label>
                    <!-- Tipo de cuenta: readonly display is created/managed by JS when needed -->
                    <input type="hidden" id="tipoCuenta_hidden_view" name="tipoCuenta">
                  </div>

                  <div class="form-group">
                    <label class="modal-expert__label" for="numeroCuenta">
                      <i class="fas fa-hashtag modal-expert__icon"></i>
                      Número de cuenta *
                    </label>
                    <div class="account-input-wrapper">
                      <input type="password" id="numeroCuenta" class="modal-expert__input account-input" required
                        placeholder="Número de cuenta" />
                      <button type="button" class="toggle-password" aria-label="Mostrar número de cuenta">
                        <i class="fas fa-eye"></i>
                      </button>
                    </div>
                    <small class="modal-expert__hint">Número completo de tu cuenta</small>
                  </div>

                  <div class="form-group">
                    <label class="modal-expert__label" for="titular">
                      <i class="fas fa-user-tie modal-expert__icon"></i>
                      Titular de la cuenta *
                    </label>
                    <input type="text" id="titular" class="modal-expert__input" required
                      placeholder="Nombre completo del titular" />
                    <small class="modal-expert__hint">Debe coincidir con el nombre en la cuenta</small>
                  </div>

                  <div class="form-group">
                    <label class="modal-expert__label" for="tipoDocumento">
                      <i class="fas fa-id-card modal-expert__icon"></i>
                      Tipo de documento *
                    </label>
                    <select id="tipoDocumento" class="modal-expert__input" required>
                      <option value="">Selecciona el tipo</option>
                      <option value="cedula">Cédula de Ciudadanía</option>
                      <option value="extranjeria">Cédula de Extranjería</option>
                    </select>
                    <!-- Tipo de documento: readonly display is created/managed by JS when needed -->
                  </div>

                  <div class="form-group">
                    <label class="modal-expert__label" for="numeroDocumento">
                      <i class="fas fa-fingerprint modal-expert__icon"></i>
                      Número de documento *
                    </label>
                    <input type="text" id="numeroDocumento" class="modal-expert__input" required
                      placeholder="Número de identificación" />
                    <small class="modal-expert__hint">Documento del titular</small>
                  </div>

                  <div class="form-group full-width">
                    <label class="modal-expert__label">
                      <i class="fas fa-phone modal-expert__icon"></i>
                      Teléfono de contacto
                    </label>
                    <div class="phone-fields">
                      <input type="tel" class="modal-expert__input" placeholder="+57 300 123 4567" />

                    </div>
                    <small class="modal-expert__hint">Opcional: Teléfono para contacto sobre pagos</small>
                  </div>
                </div>

                <div class="info-box">
                  <div class="info-header">
                    <i class="fas fa-info-circle"></i>
                    <strong>Información importante sobre pagos</strong>
                  </div>
                  <ul class="info-list">
                    <li><i class="fas fa-check"></i> Los pagos se procesan cada 15 días</li>
                    <li><i class="fas fa-check"></i> Se requiere verificación de cuenta</li>
                    <li><i class="fas fa-check"></i> Datos editables desde tu perfil</li>
                    <li><i class="fas fa-check"></i> Seguridad garantizada</li>
                  </ul>
                </div>
              </div>
            </div>

          </div>
        </form>
      </div>

      <div class="modal-expert__footer">
        <button class="btn btn-primary" type="button" data-action="close-modal" aria-label="Cerrar">Cerrar</button>
      </div>
    </div>
  </div>

  <!-- Modal para ver perfil de experto -->
  <div id="verPerfilExperto" class="modal-expert">
    <div class="modal-expert__container">

      <!-- Modal header -->
      <div class="modal-expert__header">
        <h2 class="modal-expert__title">
          <i class="fas fa-user-plus"></i> Ver perfil del experto
        </h2>
        <button class="btn-close" aria-label="Cerrar modal">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="modal-expert__body">
        <form id="viewExpertForm">
          <div class="modal-expert__grid">

            <!-- Información básica -->
            <div class="form-group">
              <label class="modal-expert__label" for="name">
                <i class="fas fa-user modal-expert__icon"></i>
                Nombre completo
              </label>
              <input type="text" id="name" class="modal-expert__input" placeholder="Nombre y apellidos registrados" />
            </div>

            <!-- Email -->
            <div class="form-group">
              <label class="modal-expert__label" for="email">
                <i class="fas fa-envelope modal-expert__icon"></i>
                Email registrado
              </label>
              <input type="email" id="email" class="modal-expert__input" placeholder="Email de la cuenta" />
            </div>

            <!-- Precio por hora -->
            <div class="form-group">
              <label class="modal-expert__label" for="precio">
                <i class="fas fa-money-bill-wave modal-expert__icon"></i>
                Precio por hora (COP)
                <span class="price-tooltip" title="Ejemplo recomendado: $30.000 - $200.000 COP">
                  <i class="fas fa-info-circle"></i>
                </span>
              </label>
              <div class="price-input-wrapper">
                <input type="number" id="precio" class="modal-expert__input price-input" min="10000" step="100" required
                  placeholder="Ej: 50000" />
              </div>
              <p class="modal-expert__hint">Tarifa por hora de asesoría (Recomendado: $30.000 - $200.000 COP)</p>
            </div>

            <!-- Días disponibles -->
            <div class="form-group">
              <label class="modal-expert__label">
                <i class="fas fa-calendar-alt modal-expert__icon"></i>
                Días disponibles
              </label>
              <div class="days-selector">
                <div class="days-buttons">
                  <button type="button" class="day-button" data-day="lunes">L</button>
                  <button type="button" class="day-button" data-day="martes">M</button>
                  <button type="button" class="day-button" data-day="miercoles">X</button>
                  <button type="button" class="day-button" data-day="jueves">J</button>
                  <button type="button" class="day-button" data-day="viernes">V</button>
                  <button type="button" class="day-button" data-day="sabado">S</button>
                  <button type="button" class="day-button" data-day="domingo">D</button>
                </div>
                <div class="days-display">Ningún día seleccionado</div>
              </div>
              <input type="hidden" id="diasDisponibles_edit" name="diasDisponibles" />
            </div>

            <!-- Estado (custom select para control visual y accesibilidad) -->
            <div class="form-group">
              <label class="modal-expert__label" for="statusInput">
                <i class="fas fa-toggle-on modal-expert__icon"></i>
                Estado
              </label>
              <!-- Estado: readonly display is created/managed by JS when needed -->
              <input type="hidden" id="statusInput" name="status" value="">
              <small class="modal-expert__hint">Define si el experto puede recibir solicitudes</small>
            </div>

            <!-- Categorías -->
            <div class="form-group full-width">
              <label class="modal-expert__label" for="categorias-input">
                <i class="fas fa-tags modal-expert__icon"></i>
                Categorías *
              </label>

              <!-- Input de búsqueda -->
              <div class="categorias-search-wrapper">
                <input type="text" id="categorias-input" class="modal-expert__input" placeholder="Buscar categorías..."
                  autocomplete="off">
                <i class="fas fa-search categorias-search-icon"></i>
              </div>

              <!-- Chips de categorías seleccionadas -->
              <div class="categorias-chips" id="categorias-chips">
                <span class="categorias-empty">No hay categorías seleccionadas</span>
              </div>

              <!-- Lista de opciones -->
              <div class="categorias-options" id="categorias-options">
                <!-- Opciones se cargan dinámicamente -->
              </div>

              <!-- Campo hidden para el formulario -->
              <input type="hidden" id="categorias-values_edit" name="categorias">

              <small class="modal-expert__hint">Selecciona las categorías del experto (mínimo 1)</small>
            </div>

            <!-- Biografía -->
            <div class="form-group full-width">
              <label class="modal-expert__label" for="bio">
                <i class="fas fa-file-alt modal-expert__icon"></i>
                Biografía profesional
              </label>
              <textarea id="bio" class="modal-expert__input modal-expert__textarea" rows="4"
                placeholder="Descripción breve de experiencia y especialización"></textarea>
            </div>

            <!-- Datos bancarios -->
            <div class="form-group full-width">
              <div class="bank-section">
                <h3 class="bank-title">
                  <i class="fas fa-university"></i> Datos Bancarios para Pagos
                </h3>
                <p class="bank-subtitle">Información necesaria para recibir pagos por tus asesorías</p>

                <div class="bank-grid">
                  <div class="form-group">
                    <label class="modal-expert__label" for="banco">
                      Banco *
                    </label>
                    <!-- Banco: readonly display is created/managed by JS when needed -->
                    <input type="hidden" id="banco_hidden_view" name="banco">
                  </div>

                  <div class="form-group">
                    <label class="modal-expert__label" for="tipoCuenta">
                      Tipo de cuenta *
                    </label>
                    <!-- Tipo de cuenta: readonly display is created/managed by JS when needed -->
                    <input type="hidden" id="tipoCuenta_hidden_view" name="tipoCuenta">
                  </div>

                  <div class="form-group">
                    <label class="modal-expert__label" for="numeroCuenta">
                      Número de cuenta *
                    </label>
                    <div class="account-input-wrapper">
                      <input type="password" id="numeroCuenta" class="modal-expert__input account-input" required
                        placeholder="Número de cuenta" readonly aria-readonly="true" />
                      <button type="button" class="toggle-password" aria-label="Mostrar número de cuenta" disabled
                        aria-hidden="true" style="display:none;">
                        <i class="fas fa-eye"></i>
                      </button>
                    </div>
                    <small class="modal-expert__hint">Número completo de tu cuenta</small>
                  </div>

                  <div class="form-group">
                    <label class="modal-expert__label" for="titular">
                      Titular de la cuenta *
                    </label>
                    <input type="text" id="titular" class="modal-expert__input" required
                      placeholder="Nombre completo del titular" readonly aria-readonly="true" />
                    <small class="modal-expert__hint">Debe coincidir con el nombre en la cuenta</small>
                  </div>

                  <div class="form-group">
                    <label class="modal-expert__label" for="tipoDocumento">
                      Tipo de documento *
                    </label>
                    <!-- Tipo de documento: readonly display is created/managed by JS when needed -->
                    <input type="hidden" id="tipoDocumento_hidden_view" name="tipoDocumento">
                  </div>

                  <div class="form-group">
                    <label class="modal-expert__label" for="numeroDocumento">
                      Número de documento *
                    </label>
                    <input type="text" id="numeroDocumento" class="modal-expert__input" required
                      placeholder="Número de identificación" readonly aria-readonly="true" />
                    <small class="modal-expert__hint">Documento del titular</small>
                  </div>

                  <div class="form-group full-width">
                    <label class="modal-expert__label">
                      <i class="fas fa-phone modal-expert__icon"></i>
                      Teléfono de contacto
                    </label>
                    <div class="phone-fields">
                      <input type="tel" class="modal-expert__input" placeholder="+57 300 123 4567" readonly
                        aria-readonly="true" />

                    </div>
                    <small class="modal-expert__hint">Opcional: Teléfono para contacto sobre pagos</small>
                  </div>
                </div>

                <!-- Caja de información eliminada según lo solicitado -->
              </div>
            </div>

          </div>
        </form>
      </div>

      <div class="modal-expert__footer">
        <button class="btn btn-primary" type="button" data-action="close-modal" aria-label="Cerrar">Cerrar</button>
      </div>
    </div>
  </div>

  <!-- Modal para editar nuevo experto -->
  <div id="editExpertModal" class="modal-expert">
    <div class="modal-expert__container">

      <!-- Modal header -->
      <div class="modal-expert__header">
        <h2 class="modal-expert__title">
          <i class="fas fa-user-plus"></i> Editar perfil del experto
        </h2>
        <button class="btn-close" aria-label="Cerrar modal">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <div class="modal-expert__body">
        <form id="editExpertForm">
          <div class="modal-expert__grid">

            <!-- Información básica -->
            <div class="form-group">
              <label class="modal-expert__label" for="name">
                <i class="fas fa-user modal-expert__icon"></i>
                Nombre completo
              </label>
              <input type="text" id="name" class="modal-expert__input" placeholder="Nombre y apellidos registrados" />
            </div>

            <!-- Email -->
            <div class="form-group">
              <label class="modal-expert__label" for="email">
                <i class="fas fa-envelope modal-expert__icon"></i>
                Email registrado
              </label>
              <input type="email" id="email" class="modal-expert__input" placeholder="Email de la cuenta" />
            </div>

            <!-- Precio por hora -->
            <div class="form-group">
              <label class="modal-expert__label" for="precio">
                <i class="fas fa-money-bill-wave modal-expert__icon"></i>
                Precio por hora (COP)
                <span class="price-tooltip" title="Ejemplo recomendado: $30.000 - $200.000 COP">
                  <i class="fas fa-info-circle"></i>
                </span>
              </label>
              <div class="price-input-wrapper">
                <input type="number" id="precio" class="modal-expert__input price-input" min="10000" step="100" required
                  placeholder="Ej: 50000" />
              </div>
              <p class="modal-expert__hint">Tarifa por hora de asesoría (Recomendado: $30.000 - $200.000 COP)</p>
            </div>

            <!-- Días disponibles -->
            <div class="form-group">
              <label class="modal-expert__label">
                <i class="fas fa-calendar-alt modal-expert__icon"></i>
                Días disponibles
              </label>
              <div class="days-selector">
                <div class="days-buttons">
                  <button type="button" class="day-button" data-day="lunes">L</button>
                  <button type="button" class="day-button" data-day="martes">M</button>
                  <button type="button" class="day-button" data-day="miercoles">X</button>
                  <button type="button" class="day-button" data-day="jueves">J</button>
                  <button type="button" class="day-button" data-day="viernes">V</button>
                  <button type="button" class="day-button" data-day="sabado">S</button>
                  <button type="button" class="day-button" data-day="domingo">D</button>
                </div>
                <div class="days-display">Ningún día seleccionado</div>
              </div>
              <input type="hidden" id="diasDisponibles" name="diasDisponibles" />
            </div>

            <!-- Estado (custom select para control visual y accesibilidad) -->
            <div class="form-group">
              <label class="modal-expert__label" for="statusInput">
                <i class="fas fa-toggle-on modal-expert__icon"></i>
                Estado
              </label>
              <div class="select-with-icons">
                <!-- control custom: mantiene compatibilidad con el formulario mediante un input hidden -->
                <div class="custom-select" data-name="status" role="combobox" aria-haspopup="listbox"
                  aria-expanded="false" tabindex="0">
                  <input type="hidden" id="statusInput" name="status" value="active">
                  <div class="custom-select__trigger" aria-labelledby="statusLabel">
                    <span class="custom-select__value" id="statusLabel">Activo</span>
                    <i class="fas fa-chevron-down icon-right" aria-hidden="true"></i>
                  </div>
                  <ul class="custom-select__options" role="listbox">
                    <li role="option" data-value="active" aria-selected="true">Activo</li>
                    <li role="option" data-value="pending" aria-selected="false">Pendiente</li>
                    <li role="option" data-value="inactive" aria-selected="false">Inactivo</li>
                  </ul>
                </div>
              </div>
              <small class="modal-expert__hint">Define si el experto puede recibir solicitudes</small>
            </div>

            <!-- Categorías -->
            <div class="form-group full-width">
              <label class="modal-expert__label" for="categorias-input">
                <i class="fas fa-tags modal-expert__icon"></i>
                Categorías *
              </label>

              <!-- Input de búsqueda -->
              <div class="categorias-search-wrapper">
                <input type="text" id="categorias-input" class="modal-expert__input" placeholder="Buscar categorías..."
                  autocomplete="off">
                <i class="fas fa-search categorias-search-icon"></i>
              </div>

              <!-- Chips de categorías seleccionadas -->
              <div class="categorias-chips" id="categorias-chips">
                <span class="categorias-empty">No hay categorías seleccionadas</span>
              </div>

              <!-- Lista de opciones -->
              <div class="categorias-options" id="categorias-options">
                <!-- Opciones se cargan dinámicamente -->
              </div>

              <!-- Campo hidden para el formulario -->
              <input type="hidden" id="categorias-values" name="categorias">

              <small class="modal-expert__hint">Selecciona las categorías del experto (mínimo 1)</small>
            </div>


            <!-- Biografía -->
            <div class="form-group full-width">
              <label class="modal-expert__label" for="bio">
                <i class="fas fa-file-alt modal-expert__icon"></i>
                Biografía profesional
              </label>
              <textarea id="bio" class="modal-expert__input modal-expert__textarea" rows="4"
                placeholder="Descripción breve de experiencia y especialización"></textarea>
            </div>

            <!-- Datos bancarios -->
            <div class="form-group full-width">
              <div class="bank-section">
                <h3 class="bank-title">
                  <i class="fas fa-university"></i> Datos Bancarios para Pagos
                </h3>
                <p class="bank-subtitle">Información necesaria para recibir pagos por tus asesorías</p>

                <div class="bank-grid">
                  <div class="form-group">
                    <label class="modal-expert__label" for="banco_edit">
                      <i class="fas fa-university modal-expert__icon"></i>
                      Banco *
                    </label>
                    <!-- Editable banco field for edit modal -->
                    <select id="banco_edit" name="banco" class="modal-expert__input">
                      <option value="">-- Seleccionar banco --</option>
                      <option value="Bancolombia">Bancolombia</option>
                      <option value="Nequi">Nequi</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label class="modal-expert__label" for="tipoCuenta_edit">
                      <i class="fas fa-credit-card modal-expert__icon"></i>
                      Tipo de cuenta *
                    </label>
                    <select id="tipoCuenta_edit" name="tipoCuenta" class="modal-expert__input">
                      <option value="">-- Seleccionar tipo de cuenta --</option>
                      <option value="Ahorros">Ahorros</option>
                      <option value="Corriente">Corriente</option>
                      <option value="Nequi">Nequi</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label class="modal-expert__label" for="numeroCuenta_edit">
                      <i class="fas fa-hashtag modal-expert__icon"></i>
                      Número de cuenta *
                    </label>
                    <div class="account-input-wrapper">
                      <input type="text" id="numeroCuenta_edit" name="numeroCuenta"
                        class="modal-expert__input account-input" required placeholder="Número de cuenta" />
                    </div>
                    <small class="modal-expert__hint">Número completo de tu cuenta</small>
                  </div>

                  <div class="form-group">
                    <label class="modal-expert__label" for="titular_edit">
                      <i class="fas fa-user-tie modal-expert__icon"></i>
                      Titular de la cuenta *
                    </label>
                    <input type="text" id="titular_edit" name="titular" class="modal-expert__input" required
                      placeholder="Nombre completo del titular" />
                    <small class="modal-expert__hint">Debe coincidir con el nombre en la cuenta</small>
                  </div>

                  <div class="form-group">
                    <label class="modal-expert__label" for="tipoDocumento_edit">
                      <i class="fas fa-id-card modal-expert__icon"></i>
                      Tipo de documento *
                    </label>
                    <select id="tipoDocumento_edit" name="tipoDocumento" class="modal-expert__input">
                      <option value="">-- Seleccionar tipo de documento --</option>
                      <option value="CC">Cédula</option>
                      <option value="CE">Permiso de extranjería</option>
                      <option value="NIT">NIT</option>
                    </select>
                  </div>

                  <div class="form-group">
                    <label class="modal-expert__label" for="numeroDocumento_edit">
                      <i class="fas fa-fingerprint modal-expert__icon"></i>
                      Número de documento *
                    </label>
                    <input type="text" id="numeroDocumento_edit" name="numeroDocumento" class="modal-expert__input"
                      required placeholder="Número de identificación" />
                    <small class="modal-expert__hint">Documento del titular</small>
                  </div>

                  <div class="form-group full-width">
                    <label class="modal-expert__label" for="telefonoContacto_edit">
                      <i class="fas fa-phone modal-expert__icon"></i>
                      Teléfono de contacto
                    </label>
                    <div class="phone-fields">
                      <input type="tel" id="telefonoContacto_edit" name="telefonoContacto" class="modal-expert__input"
                        placeholder="+57 300 123 4567" />

                    </div>
                    <small class="modal-expert__hint">Opcional: Teléfono para contacto sobre pagos</small>
                  </div>
                </div>

                <div class="info-box">
                  <div class="info-header">
                    <i class="fas fa-info-circle"></i>
                    <strong>Información importante sobre pagos</strong>
                  </div>
                  <ul class="info-list">
                    <li><i class="fas fa-check"></i> Los pagos se procesan cada 15 días</li>
                    <li><i class="fas fa-check"></i> Se requiere verificación de cuenta</li>
                    <li><i class="fas fa-check"></i> Datos editables desde tu perfil</li>
                    <li><i class="fas fa-check"></i> Seguridad garantizada</li>
                  </ul>
                </div>
              </div>
            </div>

          </div>
        </form>
      </div>

      <div class="modal-expert__footer">
        <button class="btn btn-outline" type="button" data-action="close-modal">Cancelar</button>
        <button class="btn btn-primary" type="submit" form="editExpertForm">Guardar cambios experto</button>
      </div>
    </div>
  </div>

  <!-- Modal para inactivar experto -->
  <div id="modalInactivarExperto" class="modal-expert">
    <div class="modal-expert__content">
      <div class="modal-expert__header">
        <h2 class="modal-expert__title">Inactivar experto</h2>
        <button class="btn-close"><i class="fas fa-times"></i></button>
      </div>
      <div class="modal-expert__body">
        <p id="modalInactivarExpertoNombre" class="modal-expert__nombre-destacado"></small>
        <p>
          ¿Está seguro que desea inactivar este usuario?<br />
          <span class="modal-expert__texto-secundario">
            El usuario <b>no se eliminará</b> de la base de datos, solo pasará
            a estado <b>inactivo</b>.
          </span>
          </small>
      </div>
      <div class="modal-expert__footer">
        <button type="button" class="btn-outline modal-inactivar-cancelar">
          Cancelar
        </button>
        <button type="button" class="btn-primary modal-inactivar-confirmar">
          Inactivar
        </button>
      </div>
    </div>
  </div>
  <!-- Datos iniciales para el script -->
  <script id="initial-expertos" type="application/json"><%- JSON.stringify(initialExpertos || []) %></script>
  <script id="categorias-data" type="application/json"><%- JSON.stringify(categorias || []) %></script>
  <script id="current-user-data" type="application/json"><%- JSON.stringify(user || {}) %></script>

  <script src="/assets/js/admin/admin-common.js"></script>
  <script src="/assets/js/admin/admin-expertos.js"></script>
  <script src="/assets/js/admin/admin-expertos.bootstrap.js"></script>

</body>

</html>
